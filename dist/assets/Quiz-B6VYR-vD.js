import{j as e,u as h,a as A}from"./index-DuqSQPV8.js";import{m as r,u as C,B as z,d as Q,A as f,a as E,S as I,s as B,Q as S,b as R,c as M}from"./ElementResults-DiwYyxP2.js";function O({current:t,total:s}){const l=Math.round(t/s*100);return e.jsxs("div",{className:"flex items-center gap-3 font-display text-xs text-content-muted tracking-widest",children:[e.jsx("div",{className:"w-28 h-1 bg-white/10 rounded-full overflow-hidden",children:e.jsx(r.div,{className:"h-full rounded-full progress-glow",style:{background:"linear-gradient(90deg, #3d7eff, #00e5ff)"},initial:{width:0},animate:{width:`${l}%`},transition:{duration:.6,ease:[.34,1.56,.64,1]}})}),e.jsxs("span",{children:[t," / ",s]})]})}function T({totalScore:t,totalElements:s}){const l=h(),a=s*4,i=Math.round(t/a*100);return e.jsxs(r.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-full max-w-3xl text-center bg-dark-card border border-white/[0.07] rounded-3xl px-8 py-16",children:[e.jsx("div",{className:"font-display text-3xl sm:text-5xl font-black gradient-text-gold mb-2",children:"Quiz Complete! ðŸŽ‰"}),e.jsxs("p",{className:"text-content-secondary text-base mb-10",children:["You completed all ",s," elements. Here's your result:"]}),e.jsxs("div",{className:"font-display font-black text-6xl sm:text-7xl text-accent-gold text-glow-gold mb-1",children:[t," / ",a]}),e.jsx("span",{className:"font-display font-medium text-[11px] text-content-muted tracking-[3px] uppercase mb-4 block",children:"Elementra Test Complete"}),e.jsxs("div",{className:"font-display text-[13px] text-content-muted tracking-widest uppercase mb-12",children:[i,"% Accuracy Â· ",s," Elements Completed"]}),e.jsx(r.button,{whileHover:{scale:1.04,boxShadow:"0 0 50px rgba(0,229,255,0.5)"},whileTap:{scale:.97},onClick:()=>{l("/quiz",{replace:!0}),window.location.reload()},className:"inline-flex items-center gap-3 px-10 py-4 rounded-full font-display text-[13px] font-bold tracking-widest uppercase text-dark-primary shadow-glow-blue",style:{background:"linear-gradient(135deg, #3d7eff, #00e5ff)"},children:"ðŸ” Try Again"})]})}function L(){var m;const t=h(),l=((m=A().state)==null?void 0:m.startingIndex)??null,{elementQueue:a,currentIndex:i,currentElement:o,questions:c,phase:d,answers:x,selected:g,elementScore:w,totalScore:u,elementKey:y,handleAnswer:j,retryElement:b,goNext:v}=C(l);if(!o)return null;const N=x.filter(Boolean).length;return e.jsxs("div",{className:"relative min-h-screen bg-dark-primary overflow-x-hidden",children:[e.jsx(z,{}),e.jsx(Q,{}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center px-4 sm:px-6 py-10 pb-20",children:[e.jsxs("header",{className:"w-full max-w-3xl flex items-center justify-between mb-12",children:[e.jsx("button",{onClick:()=>t("/"),className:"font-display text-[13px] text-accent-cyan tracking-[3px] uppercase hover:opacity-70 transition-opacity",children:"â† ChemQuiz"}),e.jsx(O,{current:i+1,total:a.length})]}),d==="quiz-done"?e.jsx(T,{totalScore:u,totalElements:a.length}):e.jsx(f,{mode:"wait",children:e.jsxs(r.div,{initial:{opacity:0,x:60},animate:{opacity:1,x:0,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,x:-60,transition:{duration:.25,ease:"easeIn"}},className:"flex flex-col items-center w-full max-w-3xl",children:[e.jsx(E,{element:o}),e.jsx(I,{score:u,total:i*4+N}),e.jsx(r.div,{className:"w-full flex flex-col gap-8",variants:B,initial:"hidden",animate:"visible",children:c.flatMap((k,n)=>{const p=[e.jsx(S,{question:k,questionIndex:n,answer:x[n],selectedOptionIndex:g[n],onAnswer:j},`q-${n}`)];return n<c.length-1&&p.push(e.jsx(R,{currentElement:o},`scratch-${n}`)),p})}),e.jsx(f,{children:d==="element-done"&&e.jsx(M,{elementScore:w,isLast:i>=a.length-1,onNext:v,onRetry:b})})]},y)})]})]})}export{L as default};
